@*@using Syncfusion.JavaScript.DataVisualization*@

@section SampleHeading{<span class="sampleName">Chart-Range Selection-ASP.NET MVC-SYNCFUSION</span>}

@section MetaTags{
    <meta name="description" content="This sample demonstrates how to perform multiple selection for series using Syncfusion ASP.NET MVC Chart Control">
}

@section ControlsSection{

    @(Html.EJ().Chart("Chart1")
       .PrimaryXAxis(pr => pr.Title(tl => tl.Text("Years")).Font(fn => fn.Size("15px")))
            .PrimaryYAxis(yaxis => yaxis.Title(tit => tit.Text("Sales in Units")))
            .CommonSeriesOptions(cm => cm.EnableAnimation(true).Type(SeriesType.Scatter)
            .Tooltip(tooltip => tooltip.Visible(true))
            .SelectionSettings(hs => hs.Enable(true).RangeType(MultiSelectType.XY).Mode(ChartMode.Range)))
            .Series(sr =>
                {
                    sr.Points(pt =>
                        {
                            pt.X("1971").Y(50).Add(); pt.X("1972").Y(20).Add();
                            pt.X("1973").Y(63).Add(); pt.X("1974").Y(81).Add();
                            pt.X("1975").Y(64).Add(); pt.X("1976").Y(36).Add();
                            pt.X("1977").Y(22).Add(); pt.X("1978").Y(78).Add();
                            pt.X("1979").Y(60).Add(); pt.X("1980").Y(41).Add();
                            pt.X("1981").Y(62).Add(); pt.X("1982").Y(56).Add();
                            pt.X("1983").Y(96).Add(); pt.X("1984").Y(48).Add();
                            pt.X("1985").Y(23).Add(); pt.X("1986").Y(54).Add();
                            pt.X("1987").Y(73).Add(); pt.X("1988").Y(56).Add();
                            pt.X("1989").Y(67).Add(); pt.X("1990").Y(79).Add();
                            pt.X("1991").Y(18).Add(); pt.X("1992").Y(78).Add();
                            pt.X("1993").Y(92).Add(); pt.X("1994").Y(43).Add();
                            pt.X("1995").Y(29).Add(); pt.X("1996").Y(14).Add();
                            pt.X("1997").Y(85).Add(); pt.X("1998").Y(24).Add();
                            pt.X("1999").Y(61).Add(); pt.X("2000").Y(80).Add();
                            pt.X("2001").Y(14).Add(); pt.X("2002").Y(34).Add();
                            pt.X("2003").Y(81).Add(); pt.X("2004").Y(70).Add();
                            pt.X("2005").Y(21).Add(); pt.X("2006").Y(70).Add();
                            pt.X("2007").Y(32).Add(); pt.X("2008").Y(43).Add();
                            pt.X("2009").Y(21).Add(); pt.X("2010").Y(63).Add();
                            pt.X("2011").Y(9).Add(); pt.X("2012").Y(51).Add();
                            pt.X("2013").Y(25).Add(); pt.X("2014").Y(96).Add();
                            pt.X("2015").Y(32).Add();
                        }).Fill("#5cd65c").Name("Product A")
                        .Marker(mr => mr.Shape(ChartShape.Star).Size(sz => sz.Height(15).Width(15))).Add();
                    sr.Points(pt =>
                    {
                        pt.X("1971").Y(23).Add(); pt.X("1972").Y(67).Add();
                        pt.X("1973").Y(83).Add(); pt.X("1974").Y(43).Add();
                        pt.X("1975").Y(8).Add(); pt.X("1976").Y(41).Add();
                        pt.X("1977").Y(56).Add(); pt.X("1978").Y(31).Add();
                        pt.X("1979").Y(29).Add(); pt.X("1980").Y(87).Add();
                        pt.X("1981").Y(43).Add(); pt.X("1982").Y(12).Add();
                        pt.X("1983").Y(38).Add(); pt.X("1984").Y(67).Add();
                        pt.X("1985").Y(49).Add(); pt.X("1986").Y(67).Add();
                        pt.X("1987").Y(83).Add(); pt.X("1988").Y(16).Add();
                        pt.X("1989").Y(89).Add(); pt.X("1990").Y(18).Add();
                        pt.X("1991").Y(46).Add(); pt.X("1992").Y(39).Add();
                        pt.X("1993").Y(68).Add(); pt.X("1994").Y(87).Add();
                        pt.X("1995").Y(45).Add(); pt.X("1996").Y(42).Add();
                        pt.X("1997").Y(28).Add(); pt.X("1998").Y(82).Add();
                        pt.X("1999").Y(13).Add(); pt.X("2000").Y(83).Add();
                        pt.X("2001").Y(26).Add(); pt.X("2002").Y(57).Add();
                        pt.X("2003").Y(48).Add(); pt.X("2004").Y(84).Add();
                        pt.X("2005").Y(64).Add(); pt.X("2006").Y(24).Add();
                        pt.X("2007").Y(82).Add(); pt.X("2008").Y(37).Add();
                        pt.X("2009").Y(68).Add(); pt.X("2010").Y(37).Add();
                        pt.X("2011").Y(35).Add(); pt.X("2012").Y(81).Add();
                        pt.X("2013").Y(38).Add(); pt.X("2014").Y(51).Add();
                        pt.X("2015").Y(58).Add();
                    }).Fill("#FFD700").Name("Product B").Marker(mr => mr.Shape(ChartShape.Star).Size(sz => sz.Height(15).Width(15))).Add();

                })
            .Title(title => title.Text("Profit Comparison of A and B"))
            .IsResponsive(true)
            .Load("load")
            .RangeSelected("selectedRegion")
            .Legend(lgnd => lgnd.Visible(false))
            .Size(sz => sz.Height("550"))
    )
}
@section PropertiesSection
{
    <div id="sampleProperties">
        <div class="prop-grid">
            <div class="row">
                <table>
                    <tr>
                        <td>Selection Type</td>
                        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <td>
                            <select name="selection type" id="selection" onchange="selectiontypechanged(this)">
                                <option value="xy">xy</option>
                                <option value="x">x</option>
                                <option value="y">y</option>
                            </select>
                        </td>
                    </tr>
                </table><br />
                <table>
                    <br />
                    <tr>
                        <td>Chart Data in Grid</td>
                    </tr>
                </table><br />
                <table>
                    <tr>
                        <td>Product A</td>
                    </tr>
                    <tr><td><div id="ProductA" style="width:120px"></div></td></tr>
                </table><br />
                <table>
                    <tr><td>Product B</td></tr>
                    <tr><td><div id="ProductB" style="width:120px"></div></td></tr>
                </table>
            </div>
        </div>
    </div>
}
@section ScriptSection
{
    <script>
        function load(sender) {
            loadTheme(sender);
            var gData = [], newData = [];
            gData.push({ Year: 'No Data', Sales: 'No Data' });
            newData.push({ Year: 'No Data', Sales: 'No Data' });
            $("#ProductA").ejGrid({ "dataSource": gData });
            $("#ProductA").ejGrid({ "allowScrolling": true, "scrollSettings": { width: "auto" } });
            $("#ProductB").ejGrid({ "dataSource": newData });
            $("#ProductB").ejGrid({ "allowScrolling": true, "scrollSettings": { width: "auto" } });
        }
        function selectiontypechanged(sender) {
            var val = $("#selection")[0].value;
            var chart = $("#Chart1").ejChart('instance');
            for (var i = 0; i < chart.model.series.length; i++) {
                chart.model.series[i].selectionSettings.rangeType = val;
                chart.redraw();
            }
        }
        function selectedRegion(sender) {
            var gData = [], newData = [], collectiondata = [];
            for (var i = 0; i < sender.data.selectedDataCollection.length; i++) {
                for (var j = 0; j < sender.data.selectedDataCollection[i].length; j++) {
                    collectiondata[j] = sender.data.selectedDataCollection[i][j];
                    if (collectiondata[j].seriesIndex === 0) {
                        gData.push({ Year: collectiondata[j].x.toString(), Sales: collectiondata[j].y.toString() });
                    }
                    else if (collectiondata[j].seriesIndex === 1) {
                        newData.push({ Year: collectiondata[j].x.toString(), Sales: collectiondata[j].y.toString() });
                    }
                }
            }
            if (gData) {
                $("#ProductA").ejGrid({ "dataSource": gData });
                $("#ProductA").ejGrid({ "allowScrolling": true, "scrollSettings": { width: 120 } });
            }
            if (newData) {
                $("#ProductB").ejGrid({ "dataSource": newData });
                $("#ProductB").ejGrid({ "allowScrolling": true, "scrollSettings": { width: 120 } });
            }
        }
        $("#sampleProperties").ejPropertiesPanel();
    </script>
}



